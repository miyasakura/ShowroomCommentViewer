(()=>{var t={845:()=>{var t,e,n,o,r,c,a,s,u,i,l,d,p,m,f,g,h,v,w,S,I,k,y,b,j,x,B,_,C,G,P,O,T,N,U,E,F,W,q,z,J,L,M,R,V,D,Q=[].indexOf;o="",r="",c=0,l=!1,V=null,C=null,P=!1,O=null,U=!1,d=0,n=[],h=1,v="setting.comment",w="setting.count",k="setting.spgift",I="setting.paidgift",S="setting.freegift",y="setting.voice",E=!1,F=!1,J=!1,z=!1,W=!1,G=!1,b=new RegExp(["\ud83c[\udf00-\udfff]","\ud83d[\udc00-\ude4f]","\ud83d[\ude80-\udeff]","퟉[\ude00-\udeff]","[☀-➿]",'["#$&()*/:;<=>@[\\]^_`{|}~]',"[　”＃’（）＊．／：；＜＞＠［￥］＾＿‘｛｜｝￣・゛゜´｀¨ヽヾゝゞ〃〇―‐＼∥‥“〔〕〈〉《》「」『』【】±×÷≠≦≧∞∴♂♀°′″℃￠￡§☆★○●◎◇◇◆□■△▲▽▼※〒→←↑↓〓]"].join("|"),"g"),D=/[wWｗＷ][wWｗＷ][wWｗＷ]+/g,u=function(){return $("#message").html(""),d=0},q=function(t){return $("#message").html(t)},R=function(){return $("#room_url").val()},f=function(){return"https://6uqm5v4due.execute-api.ap-northeast-1.amazonaws.com/prod/"+R()},a=function(){return o="",r="",c=0,n=[]},T=function(t){var e;return 2!==(e=JSON.parse(t)).live_status?void q("ライブが終了しています"):(parseInt(e.room_id),parseInt(e.live_id),o=e.broadcast_key,r=e.broadcast_host,c=e.broadcast_port,!0)},L=function(){var t;return u(),t=f(),$.ajax({type:"GET",url:t,success:function(t){return P=!1,T(t)?i():void a()},error:function(){return P=!1,q("ページがみつかりません")}})},p=function(){return null!==V&&(V.send("QUIT"),V.close(),V=null,clearInterval(C)),l=!1,$("#connectButton").html("接続"),$("#connectButton").removeClass("gray"),$("#room_url").prop("disabled",!1)},x=function(){return l?(p(),P=!1):""===R()?(q("URLを入力してください。"),void(P=!1)):L()},i=function(){return s(),n=[],V&&p(),(V=new WebSocket("ws://"+r+":"+c)).onopen=function(){return V.send("SUB\t"+o),V.onmessage=B,l=!0,$("#connectButton").html("切断"),$("#connectButton").addClass("gray"),$("#room_url").prop("disabled",!0)},C=setInterval((function(){return V&&V.readyState===V.OPEN?V.send("PING"):p()}),3e4)},B=function(o){var r,c,a,s,u;if(o.isTrusted)return 2>(s=o.data.split("\t")).length||"MSG"!==s[0]?void 0:(a=s[2])?(c=JSON.parse(a),1!==(u=parseInt(c.t))&&2!==u||(r={type:u,json:c,time:(new Date).toLocaleString()},n.push(r),1===u&&(t(r),++d,$("#comment-count").html(d)),2===u&&e(r),!U)?void 0:O.cache()):void 0},t=function(t){var e,n,o,r,c,a;if(c=t.json.ac,n=t.json.cm,e=t.json.av,n.match(/^[1-5]?[0-9]$/)){if(!F)return}else if(!E)return;return o=h++,a="<tr> <td class='user-column'> <img class='avatar' id='user-img-".concat(o,"' src='https://image.showroom-cdn.com/showroom-prod/image/avatar/").concat(e,".png'> ").concat(c," </td> <td class='date-column'>").concat(t.time,"</td> <td>").concat(n,"</td> </tr>"),$("#main-tbody").prepend(a),0<=Q.call(window,!1)?void 0:G?((r=new SpeechSynthesisUtterance).volume=.3,r.rate=1,r.pitch=1.2,r.text="".concat(c.replace(b," ").substr(0,5),"さん。").concat(n.replace(b," ").replace(D,"www")),r.lang="ja-UP",speechSynthesis.speak(r)):void 0},e=function(t){var e,n,o,r,c,a,s,u;if(n=t.json.g,o=parseInt(t.json.gt),r=parseInt(t.json.h),s=t.json.n,a=t.json.ac,e=t.json.av,1===r){if(!J)return}else if(1===o){if(!z)return}else if(!W)return;return c=h++,u="<tr> <td class='user-column'> <img class='avatar' id='user-img-".concat(c,"' src='https://image.showroom-cdn.com/showroom-prod/image/avatar/").concat(e,".png'> ").concat(a," </td> <td class='date-column'>").concat(t.time,"</td> <td> <img class='gift' id='gift-img-").concat(c,"' src='https://image.showroom-cdn.com/showroom-prod/assets/img/gift/").concat(n,"_s.png'> <span class='gift-num'>x").concat(s,"</span> </td> </tr>"),$("#main-tbody").prepend(u)},s=function(){return $("#main-tbody").html("")},_=function(){return U?m():M()},$("#room_url").keypress((function(t){if(13===t.which)return $("#connectButton").click()})),M=function(){return O.cache(),O.trigger(),$("#searchButton").html("ON"),$("#searchButton").removeClass("gray"),U=!0,$("#filterText").prop("disabled",!1)},m=function(){return U=!1,$("#searchButton").html("OFF"),$("#searchButton").addClass("gray"),$("#filterText").prop("disabled",!0),O.reset(),O.search("")},j=function(){var t;if((t={})[v]=localStorage.getItem(v),t[w]=localStorage.getItem(w),t[k]=localStorage.getItem(k),t[S]=localStorage.getItem(S),t[I]=localStorage.getItem(I),t[y]=localStorage.getItem(y),t[v]||(t[v]="true"),"true"===t[v]&&(E=!0,$("#showComment").prop("checked",!0)),"true"===t[w]&&(F=!0,$("#showCountComment").prop("checked",!0)),t[k]||(t[k]="true"),"true"===t[k]&&(J=!0,$("#showSPGift").prop("checked",!0)),t[I]||(t[I]="true"),"true"===t[I]&&(z=!0,$("#showPaidGift").prop("checked",!0)),"true"===t[S]&&(W=!0,$("#showFreeGift").prop("checked",!0)),"true"===t[y])return G=!0,$("#playVoice").prop("checked",!0)},N=function(){return E=$("#showComment").prop("checked"),F=$("#showCountComment").prop("checked"),J=$("#showSPGift").prop("checked"),z=$("#showPaidGift").prop("checked"),W=$("#showFreeGift").prop("checked"),G=$("#playVoice").prop("checked"),localStorage.setItem(v,E),localStorage.setItem(w,F),localStorage.setItem(k,J),localStorage.setItem(I,z),localStorage.setItem(S,W),localStorage.setItem(y,G)},g=function(){if(N(),s(),n.forEach((function(n){if(1===n.type&&t(n),2===n.type)return e(n)})),U)return O.cache()},$((function(){return $("#connectButton").click((function(){return!P&&(P=!0,x())})),$("table").resizableColumns(),O=$("#filterText").quicksearch("table tbody tr"),$("#searchButton").click((function(){return _()})),$("#setting-open").leanModal({closeButton:".modal-close"}),j(),$("input.gift-setting").change(g)}))}},e={};!function n(o){var r=e[o];if(void 0!==r)return r.exports;var c=e[o]={exports:{}};return t[o](c,c.exports,n),c.exports}(845)})();