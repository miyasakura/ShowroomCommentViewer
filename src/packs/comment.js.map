{
  "version": 3,
  "file": "comment.js",
  "sourceRoot": "",
  "sources": [
    "comment.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "server = \"https://xlv7zi96k3.execute-api.ap-northeast-1.amazonaws.com/prod/\"\n\nroomId = 0\nliveId = 0\nbcsvrKey = \"\"\nbroadcastHost = \"\"\nbroadcastPort = 0\nconnected = false\nws = null\nping = null\nprocessing = false\nqs = null\nsearching = false\ncount = 0\nallData = []\navatarCache = {}\ngiftCache = {}\nimgId = 1\n\nkeyComment = \"setting.comment\"\nkeyCountComment = \"setting.count\"\nkeySPGift = \"setting.spgift\"\nkeyPaidGift = \"setting.paidgift\"\nkeyFreeGift = \"setting.freegift\"\nkeyVoice = \"setting.voice\"\nshowComment = false\nshowCountComment = false\nshowSPGift = false\nshowPaidGift = false\nshowFreeGift = false\nplayVoice = false\n\nranges = [\n  '\\ud83c[\\udf00-\\udfff]',\n  '\\ud83d[\\udc00-\\ude4f]',\n  '\\ud83d[\\ude80-\\udeff]',\n  '\\ud7c9[\\ude00-\\udeff]',\n  '[\\u2600-\\u27BF]',\n  '[\"#$&()\\*\\/:;<=>@\\[\\\\\\]^_`{|}~]',\n  '[　”＃’（）＊．／：；＜＞＠［￥］＾＿‘｛｜｝￣・゛゜´｀¨ヽヾゝゞ〃〇―‐＼∥‥“〔〕〈〉《》「」『』【】±×÷≠≦≧∞∴♂♀°′″℃￠￡§☆★○●◎◇◇◆□■△▲▽▼※〒→←↑↓〓]'\n]\nkigou_ex = new RegExp(ranges.join('|'), 'g')\nwww_ex = new RegExp('[wWｗＷ][wWｗＷ][wWｗＷ]+', 'g')\nclearMessage = ->\n  $(\"#message\").html(\"\")\n  count = 0\n\nshowMessage = (text) ->\n  $(\"#message\").html(text)\n\nurlKey = ->\n  return $(\"#room_url\").val()\n\ngetUrl = ->\n  server + urlKey()\n\nclear = ->\n  roomId = 0\n  liveId = 0\n  bcsvrKey = \"\"\n  broadcastHost = \"\"\n  broadcastPort = 0\n  allData = []\n\nreadData = (data) ->\n  parser=new DOMParser();\n  htmlDoc=parser.parseFromString(data, \"text/html\")\n\n  if !htmlDoc.getElementById(\"js-live-data\")\n    showMessage(\"ライブが終了しています\")\n    return\n\n  json = JSON.parse(htmlDoc.getElementById(\"js-live-data\").getAttribute(\"data-json\"))\n\n  # room_id\n  roomId = parseInt(json.room_id)\n\n  # live_id\n  liveId = parseInt(json.live_id)\n\n  # bcsvrKey\n  bcsvrKey = json.broadcast_key\n\n  # host\n  broadcastHost = json.broadcast_host\n\n  # port\n  broadcastPort = json.broadcast_port\n\n  return true\n\nstart = ->\n  clearMessage()\n  url = getUrl()\n\n  $.ajax({\n    type: \"GET\",\n    url: url,\n    success: (data) ->\n      processing = false\n      res = readData(data)\n      if !res\n        clear()\n        return\n      connect()\n    error: (XMLHttpRequest, textStatus, errorThrown) ->\n      processing = false\n\n      showMessage(\"ページがみつかりません\")\n  })\n\ndisconnect = ->\n  if ws != null\n    ws.send(\"QUIT\")\n    ws.close()\n    ws = null\n    clearInterval(ping)\n  connected = false\n  $(\"#connectButton\").html(\"接続\")\n  $(\"#connectButton\").removeClass(\"gray\")\n  $(\"#room_url\").prop(\"disabled\", false)\n\nonButtonClicked = ->\n  if connected\n    disconnect()\n    processing = false\n  else\n    if urlKey() == \"\"\n      showMessage(\"URLを入力してください。\")\n      processing = false\n      return\n    start()\n\nconnect = ->\n  clearComment()\n  allData = []\n  if ws\n    disconnect()\n\n  ws = new WebSocket('ws://' + broadcastHost + ':' + broadcastPort);\n  ws.onopen = ->\n    ws.send(\"SUB\\t\" + bcsvrKey)\n    ws.onmessage = onReceive\n    connected = true\n    $(\"#connectButton\").html(\"切断\")\n    $(\"#connectButton\").addClass(\"gray\")\n    $(\"#room_url\").prop(\"disabled\", true)\n  ping = setInterval(->\n    if ws and ws.readyState == ws.OPEN\n      ws.send(\"PING\")\n    else\n      disconnect()\n  , 30000);\n\nonReceive = (message) ->\n  if !message.isTrusted\n    return\n  splited = message.data.split(\"\\t\")\n  if splited.length < 2 || splited[0] != 'MSG'\n    return\n  jsonStr = splited[2]\n  if !jsonStr \n    return\n  json = JSON.parse(jsonStr)\n  type = parseInt(json[\"t\"])\n  if type != 1 && type != 2\n    return\n  now = new Date()\n  data = {type: type, json: json, time: now.toLocaleString()}\n  allData.push(data)\n  if type == 1\n    addComment(data)\n    count = count + 1\n    $(\"#comment-count\").html(count)\n  if type == 2\n    addGift(data)\n  if searching\n    qs.cache()\n\naddComment = (data) ->\n  name = data[\"json\"][\"ac\"]\n  comment = data[\"json\"][\"cm\"]\n  avatar = data[\"json\"][\"av\"]\n  if comment.match(/^[1-5]?[0-9]$/)\n    if !showCountComment\n      return\n  else if !showComment\n    return\n\n  id = imgId++\n  row = \"\n  <tr>\n    <td class='user-column'>\n      <img class='avatar' id='user-img-#{id}' src='https://image.showroom-live.com/showroom-prod/image/avatar/#{avatar}.png'>\n      #{name}\n    </td>\n    <td class='date-column'>#{data['time']}</td>\n    <td>#{comment}</td>\n  </tr>\n  \"\n  $(\"#main-tbody\").prepend(row)\n  if !'SpeechSynthesisUtterance' in window\n    return\n\n  if !playVoice\n    return\n\n  msg = new SpeechSynthesisUtterance()\n  msg.volume = 0.3\n  msg.rate = 1\n  msg.pitch = 1.2\n  msg.text = \"#{name.replace(kigou_ex, ' ').substr(0,5)}さん。#{comment.replace(kigou_ex,' ').replace(www_ex, 'www')}\"\n  msg.lang = \"ja-UP\"\n  speechSynthesis.speak(msg)\n\naddGift = (data) ->\n  gift = data[\"json\"][\"g\"]\n  giftType = parseInt(data[\"json\"][\"gt\"])\n  h = parseInt(data[\"json\"][\"h\"])\n  num = data[\"json\"][\"n\"]\n  name = data[\"json\"][\"ac\"]\n  avatar = data[\"json\"][\"av\"]\n  if h == 1\n    if !showSPGift\n      return\n  else if giftType == 1\n    if !showPaidGift\n      return\n  else \n    if !showFreeGift\n      return\n\n  id = imgId++\n  row = \"\n  <tr>\n    <td class='user-column'>\n      <img class='avatar' id='user-img-#{id}' src='https://image.showroom-live.com/showroom-prod/image/avatar/#{avatar}.png'>\n      #{name}\n    </td>\n    <td class='date-column'>#{data['time']}</td>\n    <td>\n      <img class='gift' id='gift-img-#{id}' src='https://image.showroom-live.com/showroom-prod/assets/img/gift/#{gift}_s.png'>\n      <span class='gift-num'>x#{num}</span>\n    </td>\n  </tr>\n  \"\n  $(\"#main-tbody\").prepend(row)\n\nclearComment = ->\n  $(\"#main-tbody\").html(\"\")\n  \nonSearchClicked = ->\n  if searching\n    endSearch()\n  else\n    startSearch()\n\n$(\"#room_url\").keypress( (e) ->\n  if e.which == 13\n    $(\"#connectButton\").click()\n)\n\nstartSearch =  ->\n  qs.cache()\n  qs.trigger()\n  $(\"#searchButton\").html(\"ON\")\n  $(\"#searchButton\").removeClass(\"gray\")\n  searching = true\n  $(\"#filterText\").prop(\"disabled\", false)\n\nendSearch =  ->\n  searching = false\n  $(\"#searchButton\").html(\"OFF\")\n  $(\"#searchButton\").addClass(\"gray\")\n  $(\"#filterText\").prop(\"disabled\", true)\n  qs.reset()\n  qs.search(\"\")\n\nloadSetting = ->\n  items = {}\n  items[keyComment] = localStorage.getItem(keyComment)\n  items[keyCountComment] = localStorage.getItem(keyCountComment)\n  items[keySPGift] = localStorage.getItem(keySPGift)\n  items[keyFreeGift] = localStorage.getItem(keyFreeGift)\n  items[keyPaidGift] = localStorage.getItem(keyPaidGift)\n  items[keyVoice] = localStorage.getItem(keyVoice)\n  if !items[keyComment]\n    items[keyComment] = \"true\"\n  if items[keyComment] == \"true\"\n    showComment = true\n    $(\"#showComment\").prop(\"checked\", true)\n\n  if items[keyCountComment] == \"true\"\n    showCountComment = true\n    $(\"#showCountComment\").prop(\"checked\", true)\n\n  if !items[keySPGift]\n    items[keySPGift] = \"true\"\n  if items[keySPGift] == \"true\"\n    showSPGift = true\n    $(\"#showSPGift\").prop(\"checked\", true)\n\n  if !items[keyPaidGift]\n    items[keyPaidGift] = \"true\"\n  if items[keyPaidGift] == \"true\"\n    showPaidGift = true\n    $(\"#showPaidGift\").prop(\"checked\", true)\n\n  if items[keyFreeGift] == \"true\"\n    showFreeGift = true\n    $(\"#showFreeGift\").prop(\"checked\", true)\n\n  if items[keyVoice] == \"true\"\n    playVoice = true\n    $(\"#playVoice\").prop(\"checked\", true)\n\nsaveSetting = ->\n  showComment = $(\"#showComment\").prop(\"checked\")\n  showCountComment = $(\"#showCountComment\").prop(\"checked\")\n  showSPGift = $(\"#showSPGift\").prop(\"checked\")\n  showPaidGift = $(\"#showPaidGift\").prop(\"checked\")\n  showFreeGift = $(\"#showFreeGift\").prop(\"checked\")\n  playVoice = $(\"#playVoice\").prop(\"checked\")\n\n  localStorage.setItem(keyComment, showComment)\n  localStorage.setItem(keyCountComment, showCountComment)\n  localStorage.setItem(keySPGift, showSPGift)\n  localStorage.setItem(keyPaidGift, showPaidGift)\n  localStorage.setItem(keyFreeGift, showFreeGift)\n  localStorage.setItem(keyVoice, playVoice)\n\ngiftSettingChanged = ->\n  saveSetting()\n  clearComment()\n  allData.forEach (data) ->\n    if data[\"type\"] == 1\n      addComment(data)\n    if data[\"type\"] == 2\n      addGift(data)\n  if searching\n    qs.cache()\n\n$ ->\n  $(\"#connectButton\").click ->\n    if processing\n      return false\n    processing = true\n    onButtonClicked()\n  $(\"table\").resizableColumns()\n  qs = $(\"#filterText\").quicksearch('table tbody tr')\n  $(\"#searchButton\").click ->\n    onSearchClicked()\n  $(\"#setting-open\").leanModal({closeButton: \".modal-close\"})\n  loadSetting()\n  $(\"input.gift-setting\").change(giftSettingChanged)\n\nerror = (msg) ->\n  showMessage(msg)\n  disconnect\n"
  ]
}